<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Lyrics</title>

<style>
body{
  margin:0;
  background:#f2f4f8;
  font-family:Georgia, serif;
}

/* Magazine article look */
.article{
  max-width:900px;
  margin:30px auto;
  background:white;
  padding:35px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,0.15);
}

.song-title{
  text-align:center;
  font-size:32px;
  font-weight:bold;
  color:#003366;
  margin-bottom:20px;
}

.song-image{
  width:100%;
  max-height:360px;
  object-fit:cover;
  border-radius:12px;
  margin-bottom:20px;
}

.lyrics{
  white-space:pre-wrap;
  line-height:1.6;
  font-size:18px;
  color:#222;
  margin-top:25px;
}

.video-box{
  margin-top:30px;
  text-align:center;
}

.back-link{
  display:block;
  text-align:center;
  margin-bottom:20px;
  color:#003366;
  font-weight:bold;
  text-decoration:none;
}
</style>

</head>
<body>

<div class="article">

<a class="back-link" href="lyrics.html">‚Üê Back to All Lyrics</a>

<h1 class="song-title" id="title"></h1>
<img id="image" class="song-image">

<div class="lyrics" id="lyrics"></div>

<div class="video-box" id="video"></div>

</div>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

const sheetURL = "https://docs.google.com/spreadsheets/d/189anRncn21sY8mBEgLpiJQqUQ-X02SEQW_zywHrBugM/gviz/tq?tqx=out:json";

fetch(sheetURL)
  .then(res => res.text())
  .then(data => {
     const json = JSON.parse(data.substring(47, data.length - 2));
     const row = json.table.rows[id].c;

     const title = row[0]?.v || "";
     const lyrics = row[1]?.v || "";
     const image = row[2]?.v || "";
     const youtube = row[3]?.v || "";

     document.getElementById("title").textContent = title;
     document.getElementById("lyrics").textContent = lyrics;
     document.getElementById("image").src = image;

     // convert YouTube link to embed
     if(youtube){
       const id = youtube.split("v=")[1] || youtube.split(".be/")[1];
       const embed = `<iframe width="100%" height="360" 
         src="https://www.youtube.com/embed/${id}" 
         frameborder="0" allowfullscreen></iframe>`;
       document.getElementById("video").innerHTML = embed;
     }
  });
</script>

</body>
</html>
