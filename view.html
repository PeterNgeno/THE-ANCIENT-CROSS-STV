<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>Lyrics</title>

<style>
:root {
  --accent: #4a90e2; /* blue accent for magazine style */
  --bg: #eaf0f8; /* soft blue background */
  --text-dark: #1a1a1a;
  --header-bg: #003366;
  --muted: #555;
}

body{
  margin:0;
  background: var(--bg);
  font-family: 'Georgia', serif;
  color: var(--text-dark);
}

/* HEADER WITH SMALL LOGO */
.header{
  position: relative;
  max-width: 900px;
  margin: 40px auto 0 auto;
  background: #fff;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  padding: 25px 30px 30px 30px;
  border-left: 5px solid var(--accent);
}

.header img.logo{
  position: absolute;
  top: 25px;
  right: 25px;
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 12px;
  border: 2px solid rgba(0,0,0,0.1);
}

.article{
  padding: 0 10px 20px 10px;
}

/* BACK LINK */
.back-link{
  display:inline-block;
  margin-bottom:25px;
  color: var(--accent);
  font-weight:bold;
  text-decoration:none;
  transition: color 0.2s;
}
.back-link:hover{
  color: var(--header-bg);
  text-decoration: underline;
}

/* SONG TITLE */
.song-title{
  text-align:center;
  font-size: 36px;
  font-weight:bold;
  color: var(--header-bg);
  margin-bottom: 30px;
  font-family: 'Palatino Linotype', serif;
  line-height:1.2;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* SONG IMAGE */
.song-image{
  width:100%;
  max-height:450px;
  object-fit:cover;
  border-radius:15px;
  margin-bottom:30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  border: 2px solid rgba(0,0,0,0.05);
}

/* LYRICS - MAGAZINE STYLE */
.lyrics{
  line-height:1.8;
  font-size:18px;
  color: var(--text-dark);
  margin-top:25px;
  padding: 0 10px;
}

.lyrics h2 {
  font-size: 26px;
  color: var(--accent);
  margin: 25px 0 15px 0;
  font-weight: bold;
  border-left: 4px solid var(--header-bg);
  padding-left: 10px;
  text-transform: uppercase;
}

.lyrics p {
  margin: 10px 0;
  text-indent: 25px;
}

/* VIDEO BOX */
.video-box{
  margin-top:40px;
  text-align:center;
}
.video-box iframe{
  width: 100%;
  max-width: 100%;
  height: 380px;
  border-radius:12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  border:0;
}

/* RESPONSIVE */
@media(max-width:600px){
  .song-title{
    font-size:28px;
  }
  .header img.logo{
    width:50px;
    height:50px;
  }
  .lyrics h2{
    font-size:22px;
  }
}
</style>
</head>

<body>

<div class="header">
  <img src="cross.png" class="logo" alt="Logo">
  <div class="article">
    <a class="back-link" href="lyrics.html">‚Üê Back to All Lyrics</a>
    <h1 class="song-title" id="title"></h1>
    <img id="image" class="song-image" alt="Song Image">
    <div class="lyrics" id="lyrics"></div>
    <div class="video-box" id="video"></div>
  </div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get("id");

const sheetURL = "https://docs.google.com/spreadsheets/d/1bEubbuVy_7KfBHU13n1yoiC0ARLElumXjo3IovgEGc0/gviz/tq?tqx=out:json";
fetch(sheetURL)
  .then(res => res.text())
  .then(data => {
     const json = JSON.parse(data.substring(47, data.length - 2));
     const row = json.table.rows[id].c;

     const title = row[0]?.v || "";
     const lyrics = row[1]?.v || "";
     const image = row[2]?.v || "";
     const youtube = row[3]?.v || "";

     document.getElementById("title").textContent = title;
     document.getElementById("image").src = image;

     const lyricsDiv = document.getElementById("lyrics");
     lyricsDiv.innerHTML = "";
     lyrics.split("\n").forEach(line => {
       line = line.trim();
       if (!line) return;

       if (line.startsWith("##")) {
         const subtitle = document.createElement("h2");
         subtitle.textContent = line.replace("##","").trim();
         lyricsDiv.appendChild(subtitle);
       } else {
         const p = document.createElement("p");
         p.textContent = line;
         lyricsDiv.appendChild(p);
       }
     });

     if(youtube){
       const ytId = youtube.split("v=")[1] || youtube.split(".be/")[1];
       const embed = `<iframe src="https://www.youtube.com/embed/${ytId}" allowfullscreen></iframe>`;
       document.getElementById("video").innerHTML = embed;
     }
  });
</script>

</body>
</html>
