<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Image Gallery</title>
<style>
  body { font-family: sans-serif; padding: 20px; }
  .group { cursor: pointer; margin: 10px; padding: 10px; border: 1px solid #ccc; display: inline-block; border-radius: 5px; }
  #images { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 20px; }
  #images img { width: 150px; height: auto; border-radius: 5px; cursor: pointer; }
  #fullscreen { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
  #fullscreen img { max-width: 90%; max-height: 90%; }
</style>
</head>
<body>

<h1>Gallery Groups</h1>
<div id="groups"></div>
<div id="images"></div>

<!-- Fullscreen view -->
<div id="fullscreen" onclick="this.style.display='none'">
  <img id="fsImg" src="">
</div>

<script>
const sheetID = '16zkLLPbpzv171WEOAt4-LMemJmmIUxL0XbgwRz4hTTY';
const sheetName = 'Sheet1';

const groupsDiv = document.getElementById('groups');
const imagesDiv = document.getElementById('images');
const fsImg = document.getElementById('fsImg');
const fullscreen = document.getElementById('fullscreen');

fetch(`https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json&sheet=${sheetName}`)
  .then(res => res.text())
  .then(data => {
    const json = JSON.parse(data.substring(47).slice(0, -2));
    const rows = json.table.rows;

    // Create groups
    rows.forEach((row, i) => {
      const groupName = row.c[0]?.v;
      const imageUrls = row.c[1]?.v.split(',').map(u => u.trim());
      if(groupName && imageUrls.length){
        const div = document.createElement('div');
        div.className = 'group';
        div.textContent = groupName;
        div.onclick = () => showImages(imageUrls);
        groupsDiv.appendChild(div);
      }
    });
  });

// Show images in group
function showImages(urls){
  imagesDiv.innerHTML = '';
  urls.forEach(url => {
    const img = document.createElement('img');
    img.src = url;
    img.onclick = () => { fsImg.src = url; fullscreen.style.display='flex'; }
    imagesDiv.appendChild(img);
  });
}
</script>

</body>
</html>
